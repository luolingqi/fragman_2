#!/bin/csh -f
echo
echo
echo
echo [31m"ATTENTION"[0m
echo 
echo 
echo [31m"The Mulliken charges were generated by divcon in amber9, you may get different result if different QM program is applied"[0m
echo
echo [31m"Step 1"[0m
echo [31m"Run antechamber to calculate the am1-bcc charges"[0m
echo [32m"../../exe/antechamber -i nad.mol2 -fi mol2 -o nad_bcc.mol2 -fo mol2  -c bcc -s 2 || goto error"[0m
../../exe/antechamber -i nad.mol2 -fi mol2 -o nad_bcc.mol2 -fo mol2  -c bcc -s 2 -df 0 || goto error

echo
echo [31m"Step 2"[0m
echo [31m"run parmchk to find missing force field parameters"[0m
echo [32m"../../exe/parmchk -i nad_bcc.mol2 -f mol2 -o frcmod_bcc || goto error"[0m
../../exe/parmchk -i nad_bcc.mol2 -f mol2 -o frcmod_bcc || goto error

echo
echo [31m"Step 3"[0m
echo [31m"run tleap to generate topology file"[0m
echo [32m"../../exe/tleap -s -f leap_bcc.in > leap.out_bcc"[0m
../../exe/tleap -s -f leap_bcc.in > leap.out_bcc

echo [32m"../../exe/dacdif -t 1 nad_bcc.mol2.save nad_bcc.mol2"[0m
../../exe/dacdif -t 1 nad_bcc.mol2.save nad_bcc.mol2
echo [32m"../../exe/dacdif frcmod_bcc.save frcmod_bcc"[0m
../../exe/dacdif frcmod_bcc.save frcmod_bcc
echo [32m"../../exe/dacdif prmtop_bcc.save prmtop_bcc"[0m
../../exe/dacdif prmtop_bcc.save prmtop_bcc
echo [32m"../../exe/dacdif prmcrd_bcc.save prmcrd_bcc"[0m
../../exe/dacdif prmcrd_bcc.save prmcrd_bcc

/bin/rm -f ANTE* ATOMTYPE.INF BCCTYPE.INF for* FOR* NEWPDB.PDB PREP.INF mopac.in
exit(0)

error:
echo "  ${0}:  Program error"
exit(1)
